"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkshopify_base_2_0"] = self["webpackChunkshopify_base_2_0"] || []).push([["section-bundle-atc"],{

/***/ "./src/modules/bundle/bundle-atc.js":
/*!******************************************!*\
  !*** ./src/modules/bundle/bundle-atc.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _bundle_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bundle.css */ \"./src/modules/bundle/bundle.css\");\n/* eslint-disable */\n\nconst tabs = document.querySelectorAll('.section-bundle__collection-tab');\n// const cartSample = {\n//     \"items\":[]\n// }\nlet cartSample = {\n  \"items\": []\n};\nconst generateCart = () => {\n  let activeProduct = document.querySelectorAll('.active-item');\n  cartSample = {\n    \"items\": []\n  };\n  let totalQty = 0;\n  activeProduct.forEach(product => {\n    let image = product.getAttribute('data-image');\n    let id = product.getAttribute('data-item-id');\n    let quantity = product.getAttribute('data-item-qty');\n    let price = product.getAttribute('data-item-price');\n    let comparePrice = product.getAttribute('data-item-compare-price');\n    cartSample.items.push({\n      \"id\": id,\n      \"quantity\": quantity,\n      \"variant_id\": 42160297509042,\n      \"comparePrice\": comparePrice,\n      \"price\": price,\n      \"image\": image\n    });\n  });\n  let firstGift = parseInt(document.querySelector('.first-gift').getAttribute('data-gift-ammount'));\n  let firstGiftImage = document.querySelector('.first-gift img').src;\n  let secondGift = parseInt(document.querySelector('.second-gift').getAttribute('data-gift-ammount'));\n  let secondGiftImage = document.querySelector('.second-gift img').src;\n  cartSample.items.forEach(item => {\n    totalQty += parseInt(item.price * item.quantity);\n  });\n  if (totalQty >= firstGift) {\n    cartSample.items.push({\n      \"quantity\": 1,\n      \"variant_id\": 42160297509042,\n      \"comparePrice\": 0,\n      \"price\": 0,\n      \"image\": firstGiftImage\n    });\n  }\n  if (totalQty >= secondGift) {\n    cartSample.items.push({\n      \"quantity\": 1,\n      \"variant_id\": 42160297509042,\n      \"comparePrice\": 0,\n      \"price\": 0,\n      \"image\": secondGiftImage\n    });\n  }\n  console.log(firstGift, secondGift, totalQty, 'totalQty');\n  return cartSample;\n};\ntabs.forEach(tab => {\n  tab.addEventListener('click', () => {\n    setActive(tab);\n    showPanel(tab);\n  });\n});\nconst setActive = function (el) {\n  [...el.parentElement.children].forEach(function (sib) {\n    sib.classList.remove('active');\n  });\n  el.classList.add('active');\n};\nconst showPanel = tab => {\n  let tabIndex = tab.getAttribute('data-tab');\n  let panels = document.querySelectorAll('.section-bundle__products-holder');\n  panels.forEach(panel => {\n    const panelIndex = panel.getAttribute('data-panel');\n    if (panelIndex === tabIndex) {\n      panel.classList.add('active');\n    } else {\n      panel.classList.remove('active');\n    }\n  });\n};\n\n//SWIPER FOR BUNDLE CART CAROUSEL\n\nvar swiper = new Swiper('.section-bundle__cart-carousel', {\n  spaceBetween: 8,\n  slidesPerView: 4,\n  slidesPerGroup: 4,\n  breakpoints: {\n    768: {\n      slidesPerView: 6,\n      slidesPerGroup: 6,\n      draggable: false\n    }\n  },\n  navigation: {\n    nextEl: '.section-bundle__cart-carousel .swiper-button-next',\n    prevEl: '.section-bundle__cart-carousel .swiper-button-prev'\n  },\n  scrollbar: {\n    el: '.section-bundle__cart-carousel .swiper-scrollbar',\n    draggable: true\n  }\n});\n\n//TOGGLE BUNDLE\nconst bundleCarousel = document.querySelector('.bundle-wrap');\nconst bundleToggler = document.querySelector('.js-bundle-toggle');\nbundleToggler.addEventListener('click', () => {\n  bundleCarousel.classList.toggle('hide-bundle');\n  if (bundleCarousel.classList.contains('hide-bundle')) {\n    bundleToggler.textContent = 'SHOW BUNDLE';\n  } else {\n    bundleToggler.textContent = 'HIDE BUNDLE';\n  }\n});\n\n//ADD TO CART LOGIC\nconst bundleAtcButtons = document.querySelectorAll('.js-atc');\nif (bundleAtcButtons) {\n  bundleAtcButtons.forEach(atcButton => {\n    atcButton.addEventListener('click', e => {\n      let overlayBundle = document.querySelector('.bundle-overlay');\n      overlayBundle.classList.add('show');\n      let idSelectors = document.querySelectorAll('.js-id-selector');\n      e.preventDefault();\n      let addItems = [];\n      idSelectors.forEach(idSelector => {\n        let id = idSelector.getAttribute('data-item-id');\n        let quantity = idSelector.getAttribute('data-item-qty');\n        if (quantity > 0) {\n          addItems.push({\n            id: id,\n            quantity: quantity\n          });\n        }\n      });\n      const formData = {\n        items: addItems\n      };\n      fetch(window.Shopify.routes.root + 'cart/add.js', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      }).then(response => {\n        if (response.status === 200) {\n          console.log(response.status, 'ok');\n          overlayBundle.classList.remove('show');\n        }\n        return response.json();\n      }).catch(error => {\n        console.error('Error:', error);\n      });\n    });\n  });\n}\nasync function getCart() {\n  const cart = {\n    \"items\": [{\n      \"id\": 42160297509042,\n      \"properties\": {},\n      \"quantity\": 1,\n      \"variant_id\": 42160297509042,\n      \"key\": \"42160297509042:551d63083b1513a1b9b73a2587483f7e\",\n      \"title\": \"Titan Smart iPhone Cable™ - 4ft (1.2m)\",\n      \"price\": 230000,\n      \"original_price\": 230000,\n      \"presentment_price\": 2300,\n      \"discounted_price\": 230000,\n      \"line_price\": 230000,\n      \"original_line_price\": 230000,\n      \"total_discount\": 0,\n      \"discounts\": [],\n      \"sku\": \"12829225-china-for-iphone-black-1-2m\",\n      \"grams\": 0,\n      \"vendor\": \"Titan Power Plus\",\n      \"taxable\": true,\n      \"product_id\": 7383457628338,\n      \"product_has_only_default_variant\": false,\n      \"gift_card\": false,\n      \"final_price\": 230000,\n      \"final_line_price\": 230000,\n      \"url\": \"/products/the-titan-smart-cable%E2%84%A2-bundle-offer?variant=42160297509042\",\n      \"featured_image\": {\n        \"aspect_ratio\": 1,\n        \"alt\": \"Titan Smart iPhone Cable™\",\n        \"height\": 549,\n        \"url\": \"https://cdn.shopify.com/s/files/1/0071/1727/5191/files/ProductImagesIndividual-TitanCable.jpg?v=1701363873\",\n        \"width\": 549\n      },\n      \"image\": \"https://cdn.shopify.com/s/files/1/0071/1727/5191/files/ProductImagesIndividual-TitanCable.jpg?v=1701363873\",\n      \"handle\": \"the-titan-smart-cable™-bundle-offer\",\n      \"requires_shipping\": true,\n      \"product_type\": \"\",\n      \"product_title\": \"Titan Smart iPhone Cable™\",\n      \"product_description\": \"Say goodbye to broken cables and slow charging with the unbreakable Titan Cable—built to outlast your device with its durable, unbreakable design!\\n\\nUltra-Fast Charging\\nUnique 90° head\\nLifetime Warranty\\n\",\n      \"variant_title\": \"4ft (1.2m)\",\n      \"variant_options\": [\"4ft (1.2m)\"],\n      \"options_with_values\": [{\n        \"name\": \"Length\",\n        \"value\": \"4ft (1.2m)\"\n      }],\n      \"line_level_discount_allocations\": [],\n      \"line_level_total_discount\": 0,\n      \"has_components\": false\n    }]\n  };\n  return cart;\n}\nasync function refreshCart() {\n  const cart = cartSample;\n  const bundleItems = document.querySelectorAll('.section-bundle__cart-carousel-item');\n  const bundleHolder = document.querySelector('.js-holder');\n  bundleHolder.innerHTML = '';\n  for (let i = 0; i < 12; i++) {\n    if (cart.items[i]) {\n      bundleHolder.innerHTML += `\n        <div class=\"swiper-slide p-[18px]\">\n            <div class=\"section-bundle__cart-carousel-item flex-col\">\n\n                <div class=\"qty-holder\">${cart.items[i].quantity > 1 ? cart.items[i].quantity : ''}</div>\n                <img class=\"\" src=\"${cart.items[i].image}\">\n            </div>\n        </div>\n        `;\n    } else {\n      bundleHolder.innerHTML += `\n            <div class=\"swiper-slide\">\n                <div class=\"section-bundle__cart-carousel-item\">\n                    <div class=\"col-quantity__button increase  p dm-sans-normal color-white text-center\">+</div>\n                </div>\n            </div>\n            `;\n    }\n    // if(cart.items[i] && document.querySelector('.class-' + cart.items[i].product_id)) {\n    //     let selector = document.querySelector('.class-' + cart.items[i].product_id)\n    //     selector.querySelector('.js-qty-number').innerHTML = cart.items[i].quantity;\n    //     selector.querySelector('.plus').setAttribute('data-quantity', cart.items[i].quantity + 1);\n    //     selector.querySelector('.minus').setAttribute('data-quantity', cart.items[i].quantity -1 );\n    // }\n  }\n\n  var swiper = new Swiper('.section-bundle__cart-carousel', {\n    spaceBetween: 8,\n    slidesPerView: 4,\n    slidesPerGroup: 4,\n    breakpoints: {\n      768: {\n        slidesPerView: 6,\n        slidesPerGroup: 6,\n        draggable: false\n      }\n    },\n    navigation: {\n      nextEl: '.section-bundle__cart-carousel .swiper-button-next',\n      prevEl: '.section-bundle__cart-carousel .swiper-button-prev'\n    },\n    scrollbar: {\n      el: '.section-bundle__cart-carousel .swiper-scrollbar',\n      draggable: true\n    }\n  });\n  let allQty = document.querySelectorAll('.js-qty-number');\n  let points = document.querySelectorAll('.point');\n  let allLines = document.querySelectorAll('.line');\n  let allNumber = 0;\n  for (let y = 0; y < allQty.length; y++) {\n    allNumber += parseFloat(allQty[y].innerHTML);\n  }\n  points.forEach((point, index) => {\n    if (point) {\n      point.style.backgroundColor = '#adadad';\n    }\n  });\n  allLines.forEach((allLine, index) => {\n    if (allLine) {\n      allLine.style.backgroundColor = '#adadad';\n    }\n  });\n  for (let z = 0; z < allNumber; z++) {\n    if (points[z]) {\n      points[z].style.backgroundColor = '#60c655';\n    }\n  }\n  let limiter = allNumber * 2 - 1;\n  for (let k = 0; k < limiter; k++) {\n    if (allLines[k]) {\n      allLines[k].style.backgroundColor = '#60c655';\n    }\n  }\n  setTimeout(() => {\n    document.querySelectorAll('.js-remove').forEach(remove => {\n      remove.addEventListener('click', () => {\n        let itemId = remove.getAttribute('data-variant-id');\n        let productId = remove.getAttribute('data-product-id');\n        fetch(window.Shopify.routes.root + 'cart/change.js', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: itemId,\n            quantity: 0\n          })\n        }).then(response => {\n          console.log(response.status);\n          if (response.status === 200) {\n            console.log(response.status, 'okkkk');\n            let selector = document.querySelector('.class-' + productId);\n            selector.querySelector('.js-qty-number').innerHTML = 0;\n            selector.querySelector('.plus').setAttribute('data-quantity', 1);\n            selector.querySelector('.minus').setAttribute('data-quantity', 0);\n            refreshCart();\n          }\n          return response.json();\n        }).catch(error => {\n          console.error('Error:', error);\n        });\n      });\n    });\n  }, 2000);\n  let totalPrice = 0;\n  let comparePrice = 0;\n  let totalQty = 0;\n  cart.items.forEach(item => {\n    totalQty += parseInt(item.quantity);\n    totalPrice += item.price * item.quantity;\n    comparePrice += item.comparePrice * item.quantity;\n  });\n  console.log(totalQty, 'duzina');\n  if (totalQty >= 5) {\n    totalPrice = totalPrice * 0.9;\n  }\n  if (totalQty >= 7) {\n    totalPrice = totalPrice * 0.7;\n  }\n  if (totalQty > 10) {\n    totalPrice = totalPrice * 0.6;\n  }\n  async function getCart() {\n    const result = await fetch(\"/cart.json\");\n    if (result.status === 200) {\n      return result.json();\n    }\n    throw new Error(`Failed to get request, Shopify returned ${result.status} ${result.statusText}`);\n  }\n  const cartSymbol = await getCart();\n  const currencySymbol = cartSymbol.currency;\n  if (currencySymbol == 'USD') {\n    currencySymbol = '$';\n  }\n  if (currencySymbol == 'EUR') {\n    currencySymbol = '€';\n  }\n  const formattedPrice = currencySymbol + (totalPrice / 100).toFixed(2);\n  const formattedPriceCompare = currencySymbol + (comparePrice / 100).toFixed(2);\n  const totalPriceElement = document.querySelector('.section-bundle__sticky-price');\n  const totalPriceElementCompare = document.querySelector('.section-bundle__sticky-price-compare');\n  totalPriceElement.textContent = formattedPrice;\n  if (comparePrice > 0) {\n    totalPriceElementCompare.textContent = formattedPriceCompare;\n  } else {\n    totalPriceElementCompare.textContent = '';\n  }\n  console.log('Refreshed cart');\n}\nconst pluses = document.querySelectorAll('.plus');\nconst minuses = document.querySelectorAll('.minus');\npluses.forEach(pluse => {\n  pluse.addEventListener('click', () => {\n    let parentElement = pluse.parentNode;\n    parentElement.classList.add('active-item');\n    let past = parentElement.querySelector('.minus');\n    let now = parentElement;\n    let future = parentElement.querySelector('.plus');\n    let nowNumber = now.getAttribute('data-item-qty');\n    let futureNumber = future.getAttribute('data-quantity');\n    let pastNumber = past.getAttribute('data-quantity');\n    nowNumber = parseInt(nowNumber) + 1;\n    futureNumber = parseInt(futureNumber) + 1;\n    pastNumber = parseInt(pastNumber) + 1;\n    now.setAttribute('data-item-qty', nowNumber);\n    now.querySelector('.js-qty-number').innerHTML = nowNumber;\n    past.setAttribute('data-quantity', pastNumber);\n    future.setAttribute('data-quantity', futureNumber);\n    let image = parentElement.getAttribute('data-image');\n    let id = parentElement.getAttribute('data-item-id');\n    generateCart();\n    refreshCart();\n  });\n});\nminuses.forEach(minus => {\n  minus.addEventListener('click', () => {\n    let parentElement = minus.parentNode;\n    let past = parentElement.querySelector('.minus');\n    let now = parentElement;\n    let future = parentElement.querySelector('.plus');\n    let nowNumber = now.getAttribute('data-item-qty');\n    let futureNumber = future.getAttribute('data-quantity');\n    let pastNumber = past.getAttribute('data-quantity');\n    if (nowNumber > 0) {\n      nowNumber = parseInt(nowNumber) - 1;\n    }\n    if (futureNumber > 0) {\n      futureNumber = parseInt(futureNumber) - 1;\n    }\n    if (futureNumber > 0) {\n      pastNumber;\n    }\n    if (nowNumber < 1) {\n      parentElement.classList.remove('active-item');\n    }\n    now.setAttribute('data-item-qty', nowNumber);\n    now.querySelector('.js-qty-number').innerHTML = nowNumber;\n    past.setAttribute('data-quantity', pastNumber);\n    future.setAttribute('data-quantity', futureNumber);\n    generateCart();\n    refreshCart();\n    // updateCart(itemId, quantity);\n    // minus.setAttribute('data-quantity', newValue)\n    // setTimeout(() => {\n    //     refreshCart();\n    // }, 1000)\n  });\n});\n\nlet infoTrigers = document.querySelectorAll('.info-icon-trigger');\nlet closeBtn = document.querySelector('.close');\ninfoTrigers.forEach(infoTriger => {\n  infoTriger.addEventListener('click', e => {\n    let infoImage = e.target.getAttribute('data-image');\n    document.querySelector('.info-image').src = infoImage;\n    document.querySelector('.product-overlay').classList.add('show');\n    document.querySelector('body').classList.add('no-scroll');\n    document.querySelector('html').classList.add('no-scroll');\n  });\n});\ncloseBtn.addEventListener('click', e => {\n  document.querySelector('.product-overlay').classList.remove('show');\n  document.querySelector('body').classList.remove('no-scroll');\n  document.querySelector('html').classList.remove('no-scroll');\n});\nlet infoPlayTrigers = document.querySelectorAll('.js-video-trig');\nlet closePlayBtn = document.querySelector('.close-play');\ninfoPlayTrigers.forEach(infoTriger => {\n  infoTriger.addEventListener('click', e => {\n    let infoVideo = e.target.getAttribute('data-video');\n    document.querySelector('.info-video').src = infoVideo;\n    document.querySelector('.product-play-overlay').classList.add('show');\n    document.querySelector('body').classList.add('no-scroll');\n    document.querySelector('html').classList.add('no-scroll');\n    setTimeout(() => {\n      document.querySelector('.info-video').play();\n    }, 300);\n  });\n});\nclosePlayBtn.addEventListener('click', e => {\n  document.querySelector('.product-play-overlay').classList.remove('show');\n  document.querySelector('body').classList.remove('no-scroll');\n  document.querySelector('html').classList.remove('no-scroll');\n  document.querySelector('.info-video').pause();\n});\nlet overlayCls = document.querySelector('.product-play-overlay');\noverlayCls.addEventListener('click', e => {\n  if (e.target.classList.contains('product-play-overlay')) {\n    document.querySelector('.product-play-overlay').classList.remove('show');\n    document.querySelector('body').classList.remove('no-scroll');\n    document.querySelector('html').classList.remove('no-scroll');\n    document.querySelector('.info-video').pause();\n  }\n});\nlet overlayClsImage = document.querySelector('.product-overlay');\noverlayClsImage.addEventListener('click', e => {\n  document.querySelector('.product-overlay').classList.remove('show');\n  document.querySelector('body').classList.remove('no-scroll');\n  document.querySelector('html').classList.remove('no-scroll');\n});\nrefreshCart();\nconst distanceTracker = $('.bundle-wrap').offset().top;\n$(window).scroll(function () {\n  const top_of_element = $('#shopify-section-footer').offset().top;\n  const bottom_of_element = $('#shopify-section-footer').offset().top + $('#shopify-section-footer').outerHeight();\n  const bottom_of_screen = $(window).scrollTop() + $(window).innerHeight();\n  const top_of_screen = $(window).scrollTop();\n  if (!(bottom_of_screen > top_of_element) && top_of_screen < bottom_of_element && $(this).scrollTop() >= distanceTracker) {\n    $('.section-bundle__tracker').addClass('tracker-fixed');\n  } else {\n    $('.section-bundle__tracker').removeClass('tracker-fixed');\n  }\n});\ndocument.addEventListener('DOMContentLoaded', function () {\n  document.querySelectorAll('.product').forEach(productElement => {\n    const productId = productElement.getAttribute('data-product-id');\n    const selectors = productElement.querySelectorAll('.variant-selectors select');\n    const addToCartButton = productElement.querySelector('.js-id-selector');\n    const price = productElement.querySelector('.js-regular-price');\n    const comparePrice = productElement.querySelector('.js-compare-price');\n    const idSelector = productElement.querySelector('.js-id-selector');\n    function getVariantId(selectedOptions) {\n      const productVariants = window.productVariants[productId];\n      const variant = productVariants.find(variant => variant.options.every((option, index) => option === selectedOptions[index]));\n      return variant ? variant.id : '';\n    }\n    function getVariantPrice(selectedOptions) {\n      const productVariants = window.productVariants[productId];\n      const variant = productVariants.find(variant => variant.options.every((option, index) => option === selectedOptions[index]));\n      return variant ? variant.priceMoney : '';\n    }\n    function getVariantPriceRaw(selectedOptions) {\n      const productVariants = window.productVariants[productId];\n      const variant = productVariants.find(variant => variant.options.every((option, index) => option === selectedOptions[index]));\n      return variant ? variant.priceRaw : '';\n    }\n    function getVariantComparePrice(selectedOptions) {\n      const productVariants = window.productVariants[productId];\n      const variant = productVariants.find(variant => variant.options.every((option, index) => option === selectedOptions[index]));\n      return variant ? variant.comparepriceMoney : '';\n    }\n    function getVariantComparePriceRaw(selectedOptions) {\n      const productVariants = window.productVariants[productId];\n      const variant = productVariants.find(variant => variant.options.every((option, index) => option === selectedOptions[index]));\n      return variant ? variant.comparepriceRaw : '';\n    }\n    function updateAddToCartButton() {\n      let selectedOptions = [];\n      selectors.forEach(selector => {\n        selectedOptions.push(selector.value);\n      });\n      const variantId = getVariantId(selectedOptions);\n      const variantPrice = getVariantPrice(selectedOptions);\n      const variantComparePrice = getVariantComparePrice(selectedOptions);\n      const variantPriceRaw = getVariantPriceRaw(selectedOptions);\n      const variantComparePriceRaw = getVariantComparePriceRaw(selectedOptions);\n      if (variantPrice) {\n        price.textContent = variantPrice;\n      }\n      if (variantComparePrice) {\n        comparePrice.textContent = variantComparePrice;\n      }\n      if (variantId) {\n        addToCartButton.setAttribute('data-item-id', variantId);\n      }\n      if (variantPriceRaw) {\n        idSelector.setAttribute('data-item-price', variantPriceRaw);\n      }\n      if (variantComparePriceRaw) {\n        idSelector.setAttribute('data-item-compare-price', variantComparePriceRaw);\n      }\n    }\n    selectors.forEach(selector => {\n      selector.addEventListener('change', updateAddToCartButton);\n    });\n    updateAddToCartButton();\n  });\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9idW5kbGUvYnVuZGxlLWF0Yy5qcyIsIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Nob3BpZnktYmFzZS0yLjAvLi9zcmMvbW9kdWxlcy9idW5kbGUvYnVuZGxlLWF0Yy5qcz85ZDE5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlICovXG5pbXBvcnQgJy4vYnVuZGxlLmNzcydcblxuY29uc3QgdGFicyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uLWJ1bmRsZV9fY29sbGVjdGlvbi10YWInKTtcbi8vIGNvbnN0IGNhcnRTYW1wbGUgPSB7XG4vLyAgICAgXCJpdGVtc1wiOltdXG4vLyB9XG5sZXQgY2FydFNhbXBsZSA9IHtcbiAgICBcIml0ZW1zXCI6W11cbn1cblxuY29uc3QgZ2VuZXJhdGVDYXJ0ID0gKCkgPT4ge1xuICAgIGxldCBhY3RpdmVQcm9kdWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFjdGl2ZS1pdGVtJylcbiAgICBjYXJ0U2FtcGxlID0ge1xuICAgICAgICBcIml0ZW1zXCI6W11cbiAgICB9XG4gICAgbGV0IHRvdGFsUXR5ID0gMDtcbiAgICBhY3RpdmVQcm9kdWN0LmZvckVhY2goKHByb2R1Y3QpID0+IHtcbiAgICAgICAgbGV0IGltYWdlID0gcHJvZHVjdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW1hZ2UnKVxuICAgICAgICBsZXQgaWQgPSBwcm9kdWN0LmdldEF0dHJpYnV0ZSgnZGF0YS1pdGVtLWlkJylcbiAgICAgICAgbGV0IHF1YW50aXR5ID0gcHJvZHVjdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXRlbS1xdHknKVxuICAgICAgICBsZXQgcHJpY2UgPSBwcm9kdWN0LmdldEF0dHJpYnV0ZSgnZGF0YS1pdGVtLXByaWNlJylcbiAgICAgICAgbGV0IGNvbXBhcmVQcmljZSA9IHByb2R1Y3QuZ2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0tY29tcGFyZS1wcmljZScpXG4gICAgICAgIGNhcnRTYW1wbGUuaXRlbXMucHVzaCh7XG4gICAgICAgICAgICBcImlkXCI6aWQsXG4gICAgICAgICAgICBcInF1YW50aXR5XCI6cXVhbnRpdHksXG4gICAgICAgICAgICBcInZhcmlhbnRfaWRcIjo0MjE2MDI5NzUwOTA0MixcbiAgICAgICAgICAgIFwiY29tcGFyZVByaWNlXCI6Y29tcGFyZVByaWNlLFxuICAgICAgICAgICAgXCJwcmljZVwiOnByaWNlLFxuICAgICAgICAgICAgXCJpbWFnZVwiOmltYWdlXG4gICAgICAgIH0pXG4gICAgfSlcbiAgICBsZXQgZmlyc3RHaWZ0ID0gcGFyc2VJbnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpcnN0LWdpZnQnKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZ2lmdC1hbW1vdW50JykpXG4gICAgbGV0IGZpcnN0R2lmdEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpcnN0LWdpZnQgaW1nJykuc3JjXG4gICAgbGV0IHNlY29uZEdpZnQgPSBwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2Vjb25kLWdpZnQnKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZ2lmdC1hbW1vdW50JykpXG4gICAgbGV0IHNlY29uZEdpZnRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWNvbmQtZ2lmdCBpbWcnKS5zcmNcbiAgICBjYXJ0U2FtcGxlLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIHRvdGFsUXR5ICs9IHBhcnNlSW50KGl0ZW0ucHJpY2UgKiBpdGVtLnF1YW50aXR5KTtcbiAgICB9KTtcbiAgICBpZih0b3RhbFF0eSA+PSBmaXJzdEdpZnQpIHtcbiAgICAgICAgY2FydFNhbXBsZS5pdGVtcy5wdXNoKHtcbiAgICAgICAgICAgIFwicXVhbnRpdHlcIjoxLFxuICAgICAgICAgICAgXCJ2YXJpYW50X2lkXCI6NDIxNjAyOTc1MDkwNDIsXG4gICAgICAgICAgICBcImNvbXBhcmVQcmljZVwiOjAsXG4gICAgICAgICAgICBcInByaWNlXCI6MCxcbiAgICAgICAgICAgIFwiaW1hZ2VcIjpmaXJzdEdpZnRJbWFnZVxuICAgICAgICB9KVxuICAgIH1cbiAgICBpZih0b3RhbFF0eSA+PSBzZWNvbmRHaWZ0KSB7XG4gICAgICAgIGNhcnRTYW1wbGUuaXRlbXMucHVzaCh7XG4gICAgICAgICAgICBcInF1YW50aXR5XCI6MSxcbiAgICAgICAgICAgIFwidmFyaWFudF9pZFwiOjQyMTYwMjk3NTA5MDQyLFxuICAgICAgICAgICAgXCJjb21wYXJlUHJpY2VcIjowLFxuICAgICAgICAgICAgXCJwcmljZVwiOjAsXG4gICAgICAgICAgICBcImltYWdlXCI6c2Vjb25kR2lmdEltYWdlXG4gICAgICAgIH0pXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGZpcnN0R2lmdCxzZWNvbmRHaWZ0LHRvdGFsUXR5LCAndG90YWxRdHknKVxuICAgIHJldHVybiBjYXJ0U2FtcGxlO1xufVxuXG50YWJzLmZvckVhY2godGFiID0+IHtcbiAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHNldEFjdGl2ZSh0YWIpO1xuICAgICAgICBzaG93UGFuZWwodGFiKTtcbiAgICB9KTtcbn0pO1xuXG5jb25zdCBzZXRBY3RpdmUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBbLi4uZWwucGFyZW50RWxlbWVudC5jaGlsZHJlbl0uZm9yRWFjaChmdW5jdGlvbiAoc2liKSB7XG4gICAgICAgIHNpYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbn07XG5cbmNvbnN0IHNob3dQYW5lbCA9ICh0YWIpID0+IHtcbiAgICBsZXQgdGFiSW5kZXggPSB0YWIuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYicpO1xuICAgIGxldCBwYW5lbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbi1idW5kbGVfX3Byb2R1Y3RzLWhvbGRlcicpO1xuXG4gICAgcGFuZWxzLmZvckVhY2gocGFuZWwgPT4ge1xuICAgICAgICBjb25zdCBwYW5lbEluZGV4ID0gcGFuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXBhbmVsJyk7XG4gICAgICAgIGlmIChwYW5lbEluZGV4ID09PSB0YWJJbmRleCkge1xuICAgICAgICAgICAgcGFuZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuLy9TV0lQRVIgRk9SIEJVTkRMRSBDQVJUIENBUk9VU0VMXG5cbnZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKCcuc2VjdGlvbi1idW5kbGVfX2NhcnQtY2Fyb3VzZWwnLCB7XG4gICAgc3BhY2VCZXR3ZWVuOiA4LFxuICAgIHNsaWRlc1BlclZpZXc6IDQsXG4gICAgc2xpZGVzUGVyR3JvdXA6IDQsXG4gICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgNzY4OiB7XG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA2LFxuICAgICAgICAgICAgc2xpZGVzUGVyR3JvdXA6IDYsXG4gICAgICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAgbmF2aWdhdGlvbjoge1xuICAgICAgICBuZXh0RWw6ICcuc2VjdGlvbi1idW5kbGVfX2NhcnQtY2Fyb3VzZWwgLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgIHByZXZFbDogJy5zZWN0aW9uLWJ1bmRsZV9fY2FydC1jYXJvdXNlbCAuc3dpcGVyLWJ1dHRvbi1wcmV2J1xuICAgIH0sXG4gICAgc2Nyb2xsYmFyOiB7XG4gICAgICAgIGVsOiAnLnNlY3Rpb24tYnVuZGxlX19jYXJ0LWNhcm91c2VsIC5zd2lwZXItc2Nyb2xsYmFyJyxcbiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgIH1cbn0pO1xuXG4vL1RPR0dMRSBCVU5ETEVcbmNvbnN0IGJ1bmRsZUNhcm91c2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1bmRsZS13cmFwJyk7XG5jb25zdCBidW5kbGVUb2dnbGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWJ1bmRsZS10b2dnbGUnKTtcblxuYnVuZGxlVG9nZ2xlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBidW5kbGVDYXJvdXNlbC5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1bmRsZScpO1xuICAgIGlmIChidW5kbGVDYXJvdXNlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGUtYnVuZGxlJykpIHtcbiAgICAgICAgYnVuZGxlVG9nZ2xlci50ZXh0Q29udGVudCA9ICdTSE9XIEJVTkRMRSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYnVuZGxlVG9nZ2xlci50ZXh0Q29udGVudCA9ICdISURFIEJVTkRMRSc7XG4gICAgfVxufSk7XG5cbi8vQUREIFRPIENBUlQgTE9HSUNcbmNvbnN0IGJ1bmRsZUF0Y0J1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXRjJyk7XG5cbmlmIChidW5kbGVBdGNCdXR0b25zKSB7XG4gICAgYnVuZGxlQXRjQnV0dG9ucy5mb3JFYWNoKGF0Y0J1dHRvbiA9PiB7XG4gICAgICAgIGF0Y0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgb3ZlcmxheUJ1bmRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idW5kbGUtb3ZlcmxheScpO1xuICAgICAgICAgICAgb3ZlcmxheUJ1bmRsZS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICAgICAgICBsZXQgaWRTZWxlY3RvcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtaWQtc2VsZWN0b3InKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGxldCBhZGRJdGVtcyA9IFtdXG4gICAgICAgICAgICBpZFNlbGVjdG9ycy5mb3JFYWNoKChpZFNlbGVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGlkID0gaWRTZWxlY3Rvci5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXRlbS1pZCcpO1xuICAgICAgICAgICAgICAgIGxldCBxdWFudGl0eSA9IGlkU2VsZWN0b3IuZ2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0tcXR5Jyk7XG4gICAgICAgICAgICAgICAgaWYocXVhbnRpdHkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHF1YW50aXR5XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0ge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiBhZGRJdGVtc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmV0Y2god2luZG93LlNob3BpZnkucm91dGVzLnJvb3QgKyAnY2FydC9hZGQuanMnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShmb3JtRGF0YSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cywgJ29rJylcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXlCdW5kbGUuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRDYXJ0KCkge1xuICAgIGNvbnN0IGNhcnQgPSB7XG4gICAgICAgIFwiaXRlbXNcIjpbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICBcImlkXCI6NDIxNjAyOTc1MDkwNDIsXG4gICAgICAgICAgICAgICBcInByb3BlcnRpZXNcIjp7XG5cbiAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICBcInF1YW50aXR5XCI6MSxcbiAgICAgICAgICAgICAgIFwidmFyaWFudF9pZFwiOjQyMTYwMjk3NTA5MDQyLFxuICAgICAgICAgICAgICAgXCJrZXlcIjpcIjQyMTYwMjk3NTA5MDQyOjU1MWQ2MzA4M2IxNTEzYTFiOWI3M2EyNTg3NDgzZjdlXCIsXG4gICAgICAgICAgICAgICBcInRpdGxlXCI6XCJUaXRhbiBTbWFydCBpUGhvbmUgQ2FibGXihKIgLSA0ZnQgKDEuMm0pXCIsXG4gICAgICAgICAgICAgICBcInByaWNlXCI6MjMwMDAwLFxuICAgICAgICAgICAgICAgXCJvcmlnaW5hbF9wcmljZVwiOjIzMDAwMCxcbiAgICAgICAgICAgICAgIFwicHJlc2VudG1lbnRfcHJpY2VcIjoyMzAwLFxuICAgICAgICAgICAgICAgXCJkaXNjb3VudGVkX3ByaWNlXCI6MjMwMDAwLFxuICAgICAgICAgICAgICAgXCJsaW5lX3ByaWNlXCI6MjMwMDAwLFxuICAgICAgICAgICAgICAgXCJvcmlnaW5hbF9saW5lX3ByaWNlXCI6MjMwMDAwLFxuICAgICAgICAgICAgICAgXCJ0b3RhbF9kaXNjb3VudFwiOjAsXG4gICAgICAgICAgICAgICBcImRpc2NvdW50c1wiOltcblxuICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgIFwic2t1XCI6XCIxMjgyOTIyNS1jaGluYS1mb3ItaXBob25lLWJsYWNrLTEtMm1cIixcbiAgICAgICAgICAgICAgIFwiZ3JhbXNcIjowLFxuICAgICAgICAgICAgICAgXCJ2ZW5kb3JcIjpcIlRpdGFuIFBvd2VyIFBsdXNcIixcbiAgICAgICAgICAgICAgIFwidGF4YWJsZVwiOnRydWUsXG4gICAgICAgICAgICAgICBcInByb2R1Y3RfaWRcIjo3MzgzNDU3NjI4MzM4LFxuICAgICAgICAgICAgICAgXCJwcm9kdWN0X2hhc19vbmx5X2RlZmF1bHRfdmFyaWFudFwiOmZhbHNlLFxuICAgICAgICAgICAgICAgXCJnaWZ0X2NhcmRcIjpmYWxzZSxcbiAgICAgICAgICAgICAgIFwiZmluYWxfcHJpY2VcIjoyMzAwMDAsXG4gICAgICAgICAgICAgICBcImZpbmFsX2xpbmVfcHJpY2VcIjoyMzAwMDAsXG4gICAgICAgICAgICAgICBcInVybFwiOlwiL3Byb2R1Y3RzL3RoZS10aXRhbi1zbWFydC1jYWJsZSVFMiU4NCVBMi1idW5kbGUtb2ZmZXI/dmFyaWFudD00MjE2MDI5NzUwOTA0MlwiLFxuICAgICAgICAgICAgICAgXCJmZWF0dXJlZF9pbWFnZVwiOntcbiAgICAgICAgICAgICAgICAgIFwiYXNwZWN0X3JhdGlvXCI6MSxcbiAgICAgICAgICAgICAgICAgIFwiYWx0XCI6XCJUaXRhbiBTbWFydCBpUGhvbmUgQ2FibGXihKJcIixcbiAgICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6NTQ5LFxuICAgICAgICAgICAgICAgICAgXCJ1cmxcIjpcImh0dHBzOi8vY2RuLnNob3BpZnkuY29tL3MvZmlsZXMvMS8wMDcxLzE3MjcvNTE5MS9maWxlcy9Qcm9kdWN0SW1hZ2VzSW5kaXZpZHVhbC1UaXRhbkNhYmxlLmpwZz92PTE3MDEzNjM4NzNcIixcbiAgICAgICAgICAgICAgICAgIFwid2lkdGhcIjo1NDlcbiAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICBcImltYWdlXCI6XCJodHRwczovL2Nkbi5zaG9waWZ5LmNvbS9zL2ZpbGVzLzEvMDA3MS8xNzI3LzUxOTEvZmlsZXMvUHJvZHVjdEltYWdlc0luZGl2aWR1YWwtVGl0YW5DYWJsZS5qcGc/dj0xNzAxMzYzODczXCIsXG4gICAgICAgICAgICAgICBcImhhbmRsZVwiOlwidGhlLXRpdGFuLXNtYXJ0LWNhYmxl4oSiLWJ1bmRsZS1vZmZlclwiLFxuICAgICAgICAgICAgICAgXCJyZXF1aXJlc19zaGlwcGluZ1wiOnRydWUsXG4gICAgICAgICAgICAgICBcInByb2R1Y3RfdHlwZVwiOlwiXCIsXG4gICAgICAgICAgICAgICBcInByb2R1Y3RfdGl0bGVcIjpcIlRpdGFuIFNtYXJ0IGlQaG9uZSBDYWJsZeKEolwiLFxuICAgICAgICAgICAgICAgXCJwcm9kdWN0X2Rlc2NyaXB0aW9uXCI6XCJTYXkgZ29vZGJ5ZSB0byBicm9rZW4gY2FibGVzIGFuZCBzbG93IGNoYXJnaW5nIHdpdGggdGhlIHVuYnJlYWthYmxlIFRpdGFuIENhYmxl4oCUYnVpbHQgdG8gb3V0bGFzdCB5b3VyIGRldmljZSB3aXRoIGl0cyBkdXJhYmxlLCB1bmJyZWFrYWJsZSBkZXNpZ24hXFxuXFxuVWx0cmEtRmFzdCBDaGFyZ2luZ1xcblVuaXF1ZSA5MMKwIGhlYWRcXG5MaWZldGltZSBXYXJyYW50eVxcblwiLFxuICAgICAgICAgICAgICAgXCJ2YXJpYW50X3RpdGxlXCI6XCI0ZnQgKDEuMm0pXCIsXG4gICAgICAgICAgICAgICBcInZhcmlhbnRfb3B0aW9uc1wiOltcbiAgICAgICAgICAgICAgICAgIFwiNGZ0ICgxLjJtKVwiXG4gICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgXCJvcHRpb25zX3dpdGhfdmFsdWVzXCI6W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6XCJMZW5ndGhcIixcbiAgICAgICAgICAgICAgICAgICAgIFwidmFsdWVcIjpcIjRmdCAoMS4ybSlcIlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgIFwibGluZV9sZXZlbF9kaXNjb3VudF9hbGxvY2F0aW9uc1wiOltcblxuICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgIFwibGluZV9sZXZlbF90b3RhbF9kaXNjb3VudFwiOjAsXG4gICAgICAgICAgICAgICBcImhhc19jb21wb25lbnRzXCI6ZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgIF1cbiAgICB9XG4gICAgcmV0dXJuIGNhcnQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hDYXJ0KCkge1xuICAgIGNvbnN0IGNhcnQgPSBjYXJ0U2FtcGxlO1xuICAgIGNvbnN0IGJ1bmRsZUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24tYnVuZGxlX19jYXJ0LWNhcm91c2VsLWl0ZW0nKTtcbiAgICBjb25zdCBidW5kbGVIb2xkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtaG9sZGVyJyk7XG4gICAgYnVuZGxlSG9sZGVyLmlubmVySFRNTCA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICBpZihjYXJ0Lml0ZW1zW2ldKSB7XG4gICAgICAgIGJ1bmRsZUhvbGRlci5pbm5lckhUTUwgKz0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLXNsaWRlIHAtWzE4cHhdXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi1idW5kbGVfX2NhcnQtY2Fyb3VzZWwtaXRlbSBmbGV4LWNvbFwiPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF0eS1ob2xkZXJcIj4ke2NhcnQuaXRlbXNbaV0ucXVhbnRpdHkgPiAxID8gY2FydC5pdGVtc1tpXS5xdWFudGl0eSA6ICcnfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJcIiBzcmM9XCIke2NhcnQuaXRlbXNbaV0uaW1hZ2V9XCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGB9IGVsc2Uge1xuICAgICAgICAgICAgYnVuZGxlSG9sZGVyLmlubmVySFRNTCArPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLXNsaWRlXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb24tYnVuZGxlX19jYXJ0LWNhcm91c2VsLWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1xdWFudGl0eV9fYnV0dG9uIGluY3JlYXNlICBwIGRtLXNhbnMtbm9ybWFsIGNvbG9yLXdoaXRlIHRleHQtY2VudGVyXCI+KzwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgXG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYoY2FydC5pdGVtc1tpXSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xhc3MtJyArIGNhcnQuaXRlbXNbaV0ucHJvZHVjdF9pZCkpIHtcbiAgICAgICAgLy8gICAgIGxldCBzZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbGFzcy0nICsgY2FydC5pdGVtc1tpXS5wcm9kdWN0X2lkKVxuICAgICAgICAvLyAgICAgc2VsZWN0b3IucXVlcnlTZWxlY3RvcignLmpzLXF0eS1udW1iZXInKS5pbm5lckhUTUwgPSBjYXJ0Lml0ZW1zW2ldLnF1YW50aXR5O1xuICAgICAgICAvLyAgICAgc2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBsdXMnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcXVhbnRpdHknLCBjYXJ0Lml0ZW1zW2ldLnF1YW50aXR5ICsgMSk7XG4gICAgICAgIC8vICAgICBzZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcubWludXMnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcXVhbnRpdHknLCBjYXJ0Lml0ZW1zW2ldLnF1YW50aXR5IC0xICk7XG4gICAgICAgIC8vIH1cbiAgICB9XG5cbiAgICB2YXIgc3dpcGVyID0gbmV3IFN3aXBlcignLnNlY3Rpb24tYnVuZGxlX19jYXJ0LWNhcm91c2VsJywge1xuICAgICAgICBzcGFjZUJldHdlZW46IDgsXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXG4gICAgICAgIHNsaWRlc1Blckdyb3VwOiA0LFxuICAgICAgICBicmVha3BvaW50czoge1xuICAgICAgICAgICAgNzY4OiB7XG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogNixcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJHcm91cDogNixcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgbmV4dEVsOiAnLnNlY3Rpb24tYnVuZGxlX19jYXJ0LWNhcm91c2VsIC5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICAgICAgcHJldkVsOiAnLnNlY3Rpb24tYnVuZGxlX19jYXJ0LWNhcm91c2VsIC5zd2lwZXItYnV0dG9uLXByZXYnXG4gICAgICAgIH0sXG4gICAgICAgIHNjcm9sbGJhcjoge1xuICAgICAgICAgICAgZWw6ICcuc2VjdGlvbi1idW5kbGVfX2NhcnQtY2Fyb3VzZWwgLnN3aXBlci1zY3JvbGxiYXInLFxuICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgICB9XG4gICAgfSk7XG4gICAgbGV0IGFsbFF0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1xdHktbnVtYmVyJyk7XG4gICAgbGV0IHBvaW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb2ludCcpO1xuICAgIGxldCBhbGxMaW5lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5lJyk7XG4gICAgbGV0IGFsbE51bWJlciA9IDA7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBhbGxRdHkubGVuZ3RoOyB5KyspIHtcbiAgICAgICAgYWxsTnVtYmVyICs9IHBhcnNlRmxvYXQoYWxsUXR5W3ldLmlubmVySFRNTCk7XG4gICAgfVxuICAgIHBvaW50cy5mb3JFYWNoKChwb2ludCwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYocG9pbnQpIHtcbiAgICAgICAgICAgIHBvaW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjYWRhZGFkJ1xuICAgICAgICB9XG4gICAgfSlcbiAgICBhbGxMaW5lcy5mb3JFYWNoKChhbGxMaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICBpZihhbGxMaW5lKSB7XG4gICAgICAgICAgICBhbGxMaW5lLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjYWRhZGFkJ1xuICAgICAgICB9XG4gICAgfSlcbiAgICBmb3IgKGxldCB6ID0gMDsgeiA8IGFsbE51bWJlcjsgeisrKSB7XG4gICAgICAgIGlmKHBvaW50c1t6XSkge1xuICAgICAgICAgICAgcG9pbnRzW3pdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNjBjNjU1JztcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgbGltaXRlciA9IGFsbE51bWJlciAqIDIgLSAxO1xuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbGltaXRlcjsgaysrKSB7XG4gICAgICAgIGlmKGFsbExpbmVzW2tdKSB7XG4gICAgICAgICAgICBhbGxMaW5lc1trXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzYwYzY1NSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLXJlbW92ZScpLmZvckVhY2goKHJlbW92ZSkgPT4ge1xuICAgICAgICAgICAgcmVtb3ZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBpdGVtSWQgPSByZW1vdmUuZ2V0QXR0cmlidXRlKCdkYXRhLXZhcmlhbnQtaWQnKTtcbiAgICAgICAgICAgICAgICBsZXQgcHJvZHVjdElkID0gcmVtb3ZlLmdldEF0dHJpYnV0ZSgnZGF0YS1wcm9kdWN0LWlkJyk7XG4gICAgICAgICAgICAgICAgZmV0Y2god2luZG93LlNob3BpZnkucm91dGVzLnJvb3QgKyAnY2FydC9jaGFuZ2UuanMnLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cylcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cywgJ29ra2trJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xhc3MtJyArIHByb2R1Y3RJZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcuanMtcXR5LW51bWJlcicpLmlubmVySFRNTCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBsdXMnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcXVhbnRpdHknLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcubWludXMnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcXVhbnRpdHknLCAwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaENhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH0sIDIwMDApXG4gICAgbGV0IHRvdGFsUHJpY2UgPSAwO1xuICAgIGxldCBjb21wYXJlUHJpY2UgPSAwO1xuICAgIGxldCB0b3RhbFF0eSA9IDA7XG5cbiAgICBjYXJ0Lml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIHRvdGFsUXR5ICs9IHBhcnNlSW50KGl0ZW0ucXVhbnRpdHkpO1xuICAgICAgICB0b3RhbFByaWNlICs9IGl0ZW0ucHJpY2UgKiBpdGVtLnF1YW50aXR5O1xuICAgICAgICBjb21wYXJlUHJpY2UgKz0gaXRlbS5jb21wYXJlUHJpY2UgKiBpdGVtLnF1YW50aXR5O1xuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2codG90YWxRdHksICdkdXppbmEnKVxuICAgIGlmKHRvdGFsUXR5ID49IDUpIHtcbiAgICAgICAgdG90YWxQcmljZSA9IHRvdGFsUHJpY2UgKiAwLjk7XG4gICAgfVxuICAgIGlmKHRvdGFsUXR5ID49IDcpIHtcbiAgICAgICAgdG90YWxQcmljZSA9IHRvdGFsUHJpY2UgKiAwLjc7XG4gICAgfVxuICAgIGlmKHRvdGFsUXR5ID4gMTApIHtcbiAgICAgICAgdG90YWxQcmljZSA9IHRvdGFsUHJpY2UgKiAwLjY7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIGdldENhcnQoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoKFwiL2NhcnQuanNvblwiKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHJlcXVlc3QsIFNob3BpZnkgcmV0dXJuZWQgJHtyZXN1bHQuc3RhdHVzfSAke3Jlc3VsdC5zdGF0dXNUZXh0fWApO1xuICAgIH1cbiAgICBjb25zdCBjYXJ0U3ltYm9sID0gYXdhaXQgZ2V0Q2FydCgpO1xuICAgIGNvbnN0IGN1cnJlbmN5U3ltYm9sID0gY2FydFN5bWJvbC5jdXJyZW5jeTtcbiAgICBpZihjdXJyZW5jeVN5bWJvbCA9PSAnVVNEJykge1xuICAgICAgICBjdXJyZW5jeVN5bWJvbCA9ICckJ1xuICAgIH1cbiAgICBpZihjdXJyZW5jeVN5bWJvbCA9PSAnRVVSJykge1xuICAgICAgICBjdXJyZW5jeVN5bWJvbCA9ICfigqwnXG4gICAgfVxuICAgIGNvbnN0IGZvcm1hdHRlZFByaWNlID0gY3VycmVuY3lTeW1ib2wgKyAodG90YWxQcmljZS8xMDApLnRvRml4ZWQoMilcbiAgICBjb25zdCBmb3JtYXR0ZWRQcmljZUNvbXBhcmUgPSBjdXJyZW5jeVN5bWJvbCArIChjb21wYXJlUHJpY2UvMTAwKS50b0ZpeGVkKDIpXG4gICAgY29uc3QgdG90YWxQcmljZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1idW5kbGVfX3N0aWNreS1wcmljZScpO1xuICAgIGNvbnN0IHRvdGFsUHJpY2VFbGVtZW50Q29tcGFyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLWJ1bmRsZV9fc3RpY2t5LXByaWNlLWNvbXBhcmUnKTtcbiAgICB0b3RhbFByaWNlRWxlbWVudC50ZXh0Q29udGVudCA9IGZvcm1hdHRlZFByaWNlO1xuICAgIGlmKGNvbXBhcmVQcmljZSA+IDApIHtcbiAgICAgICAgdG90YWxQcmljZUVsZW1lbnRDb21wYXJlLnRleHRDb250ZW50ID0gZm9ybWF0dGVkUHJpY2VDb21wYXJlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdG90YWxQcmljZUVsZW1lbnRDb21wYXJlLnRleHRDb250ZW50ID0gJyc7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1JlZnJlc2hlZCBjYXJ0Jyk7XG59XG5jb25zdCBwbHVzZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGx1cycpXG5jb25zdCBtaW51c2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1pbnVzJylcblxucGx1c2VzLmZvckVhY2goKHBsdXNlKSA9PiB7XG4gICAgcGx1c2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGxldCBwYXJlbnRFbGVtZW50ID0gcGx1c2UucGFyZW50Tm9kZTtcbiAgICAgICAgcGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtaXRlbScpXG4gICAgICAgIGxldCBwYXN0ID0gcGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubWludXMnKVxuICAgICAgICBsZXQgbm93ID0gcGFyZW50RWxlbWVudFxuICAgICAgICBsZXQgZnV0dXJlID0gcGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGx1cycpXG4gICAgICAgIGxldCBub3dOdW1iZXIgPSBub3cuZ2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0tcXR5JylcbiAgICAgICAgbGV0IGZ1dHVyZU51bWJlciA9IGZ1dHVyZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcXVhbnRpdHknKVxuICAgICAgICBsZXQgcGFzdE51bWJlciA9IHBhc3QuZ2V0QXR0cmlidXRlKCdkYXRhLXF1YW50aXR5JylcbiAgICAgICAgbm93TnVtYmVyID0gcGFyc2VJbnQobm93TnVtYmVyKSArIDFcbiAgICAgICAgZnV0dXJlTnVtYmVyID0gcGFyc2VJbnQoZnV0dXJlTnVtYmVyKSArIDFcbiAgICAgICAgcGFzdE51bWJlciA9IHBhcnNlSW50KHBhc3ROdW1iZXIpICsgMVxuICAgICAgICBub3cuc2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0tcXR5Jywgbm93TnVtYmVyKVxuICAgICAgICBub3cucXVlcnlTZWxlY3RvcignLmpzLXF0eS1udW1iZXInKS5pbm5lckhUTUwgPSBub3dOdW1iZXJcbiAgICAgICAgcGFzdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcXVhbnRpdHknLCBwYXN0TnVtYmVyKVxuICAgICAgICBmdXR1cmUuc2V0QXR0cmlidXRlKCdkYXRhLXF1YW50aXR5JywgZnV0dXJlTnVtYmVyKVxuICAgICAgICBsZXQgaW1hZ2UgPSBwYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pbWFnZScpXG4gICAgICAgIGxldCBpZCA9IHBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0taWQnKVxuICAgICAgICBnZW5lcmF0ZUNhcnQoKTtcbiAgICAgICAgcmVmcmVzaENhcnQoKTtcbiAgICB9KVxufSlcblxubWludXNlcy5mb3JFYWNoKChtaW51cykgPT4ge1xuICAgIG1pbnVzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBsZXQgcGFyZW50RWxlbWVudCA9IG1pbnVzLnBhcmVudE5vZGU7XG4gICAgICAgIGxldCBwYXN0ID0gcGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubWludXMnKVxuICAgICAgICBsZXQgbm93ID0gcGFyZW50RWxlbWVudFxuICAgICAgICBsZXQgZnV0dXJlID0gcGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGx1cycpXG4gICAgICAgIGxldCBub3dOdW1iZXIgPSBub3cuZ2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0tcXR5JylcbiAgICAgICAgbGV0IGZ1dHVyZU51bWJlciA9IGZ1dHVyZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcXVhbnRpdHknKVxuICAgICAgICBsZXQgcGFzdE51bWJlciA9IHBhc3QuZ2V0QXR0cmlidXRlKCdkYXRhLXF1YW50aXR5JylcbiAgICAgICAgaWYobm93TnVtYmVyID4gMCkge1xuICAgICAgICAgICAgbm93TnVtYmVyID0gcGFyc2VJbnQobm93TnVtYmVyKSAtIDFcbiAgICAgICAgfVxuICAgICAgICBpZihmdXR1cmVOdW1iZXIgPiAwKSB7XG4gICAgICAgICAgICBmdXR1cmVOdW1iZXIgPSBwYXJzZUludChmdXR1cmVOdW1iZXIpIC0gMVxuICAgICAgICB9XG4gICAgICAgIGlmKGZ1dHVyZU51bWJlciA+IDApIHtcbiAgICAgICAgICAgIHBhc3ROdW1iZXJcbiAgICAgICAgfVxuICAgICAgICBpZihub3dOdW1iZXIgPCAxKSB7XG4gICAgICAgICAgICBwYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS1pdGVtJylcbiAgICAgICAgfVxuICAgICAgICBub3cuc2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0tcXR5Jywgbm93TnVtYmVyKVxuICAgICAgICBub3cucXVlcnlTZWxlY3RvcignLmpzLXF0eS1udW1iZXInKS5pbm5lckhUTUwgPSBub3dOdW1iZXJcbiAgICAgICAgcGFzdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcXVhbnRpdHknLCBwYXN0TnVtYmVyKVxuICAgICAgICBmdXR1cmUuc2V0QXR0cmlidXRlKCdkYXRhLXF1YW50aXR5JywgZnV0dXJlTnVtYmVyKVxuICAgICAgICBnZW5lcmF0ZUNhcnQoKTtcbiAgICAgICAgcmVmcmVzaENhcnQoKTtcbiAgICAgICAgLy8gdXBkYXRlQ2FydChpdGVtSWQsIHF1YW50aXR5KTtcbiAgICAgICAgLy8gbWludXMuc2V0QXR0cmlidXRlKCdkYXRhLXF1YW50aXR5JywgbmV3VmFsdWUpXG4gICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyAgICAgcmVmcmVzaENhcnQoKTtcbiAgICAgICAgLy8gfSwgMTAwMClcbiAgICB9KVxufSlcblxubGV0IGluZm9UcmlnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmluZm8taWNvbi10cmlnZ2VyJyk7XG5sZXQgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UnKTtcbmluZm9UcmlnZXJzLmZvckVhY2goKGluZm9UcmlnZXIpID0+IHtcbiAgICBpbmZvVHJpZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgbGV0IGluZm9JbWFnZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pbWFnZScpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mby1pbWFnZScpLnNyYyA9IGluZm9JbWFnZTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3Qtb3ZlcmxheScpLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5hZGQoJ25vLXNjcm9sbCcpXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5jbGFzc0xpc3QuYWRkKCduby1zY3JvbGwnKVxuICAgIH0pXG59KVxuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LW92ZXJsYXknKS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5yZW1vdmUoJ25vLXNjcm9sbCcpXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLmNsYXNzTGlzdC5yZW1vdmUoJ25vLXNjcm9sbCcpXG59KVxuXG5sZXQgaW5mb1BsYXlUcmlnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLXZpZGVvLXRyaWcnKTtcbmxldCBjbG9zZVBsYXlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UtcGxheScpO1xuaW5mb1BsYXlUcmlnZXJzLmZvckVhY2goKGluZm9UcmlnZXIpID0+IHtcbiAgICBpbmZvVHJpZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgbGV0IGluZm9WaWRlbyA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS12aWRlbycpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mby12aWRlbycpLnNyYyA9IGluZm9WaWRlbztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtcGxheS1vdmVybGF5JykuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LmFkZCgnbm8tc2Nyb2xsJylcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLmNsYXNzTGlzdC5hZGQoJ25vLXNjcm9sbCcpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluZm8tdmlkZW8nKS5wbGF5KCk7XG4gICAgICAgIH0sIDMwMClcbiAgICB9KVxufSlcbmNsb3NlUGxheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtcGxheS1vdmVybGF5JykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QucmVtb3ZlKCduby1zY3JvbGwnKVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5jbGFzc0xpc3QucmVtb3ZlKCduby1zY3JvbGwnKVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmZvLXZpZGVvJykucGF1c2UoKTtcbn0pXG5cbmxldCBvdmVybGF5Q2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtcGxheS1vdmVybGF5Jyk7XG5vdmVybGF5Q2xzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Byb2R1Y3QtcGxheS1vdmVybGF5JykpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtcGxheS1vdmVybGF5JykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LnJlbW92ZSgnbm8tc2Nyb2xsJylcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLmNsYXNzTGlzdC5yZW1vdmUoJ25vLXNjcm9sbCcpXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmZvLXZpZGVvJykucGF1c2UoKTtcbiAgICB9XG59KVxuXG5sZXQgb3ZlcmxheUNsc0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3Qtb3ZlcmxheScpO1xub3ZlcmxheUNsc0ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdC1vdmVybGF5JykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QucmVtb3ZlKCduby1zY3JvbGwnKVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5jbGFzc0xpc3QucmVtb3ZlKCduby1zY3JvbGwnKVxufSlcblxucmVmcmVzaENhcnQoKTtcblxuY29uc3QgZGlzdGFuY2VUcmFja2VyID0gJCgnLmJ1bmRsZS13cmFwJykub2Zmc2V0KCkudG9wXG4kKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB0b3Bfb2ZfZWxlbWVudCA9ICQoJyNzaG9waWZ5LXNlY3Rpb24tZm9vdGVyJykub2Zmc2V0KCkudG9wXG4gICAgY29uc3QgYm90dG9tX29mX2VsZW1lbnQgPSAkKCcjc2hvcGlmeS1zZWN0aW9uLWZvb3RlcicpLm9mZnNldCgpLnRvcCArICQoJyNzaG9waWZ5LXNlY3Rpb24tZm9vdGVyJykub3V0ZXJIZWlnaHQoKVxuICAgIGNvbnN0IGJvdHRvbV9vZl9zY3JlZW4gPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgKyAkKHdpbmRvdykuaW5uZXJIZWlnaHQoKVxuICAgIGNvbnN0IHRvcF9vZl9zY3JlZW4gPSAkKHdpbmRvdykuc2Nyb2xsVG9wKClcbiAgICBpZiAoIShib3R0b21fb2Zfc2NyZWVuID4gdG9wX29mX2VsZW1lbnQpICYmICh0b3Bfb2Zfc2NyZWVuIDwgYm90dG9tX29mX2VsZW1lbnQpICYmICQodGhpcykuc2Nyb2xsVG9wKCkgPj0gZGlzdGFuY2VUcmFja2VyKSB7XG4gICAgICAkKCcuc2VjdGlvbi1idW5kbGVfX3RyYWNrZXInKS5hZGRDbGFzcygndHJhY2tlci1maXhlZCcpXG4gICAgfSBlbHNlIHtcbiAgICAgICQoJy5zZWN0aW9uLWJ1bmRsZV9fdHJhY2tlcicpLnJlbW92ZUNsYXNzKCd0cmFja2VyLWZpeGVkJylcbiAgICB9XG59KVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2R1Y3QnKS5mb3JFYWNoKHByb2R1Y3RFbGVtZW50ID0+IHtcbiAgICAgIGNvbnN0IHByb2R1Y3RJZCA9IHByb2R1Y3RFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1wcm9kdWN0LWlkJyk7XG4gICAgICBjb25zdCBzZWxlY3RvcnMgPSBwcm9kdWN0RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudmFyaWFudC1zZWxlY3RvcnMgc2VsZWN0Jyk7XG4gICAgICBjb25zdCBhZGRUb0NhcnRCdXR0b24gPSBwcm9kdWN0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuanMtaWQtc2VsZWN0b3InKTtcbiAgICAgIGNvbnN0IHByaWNlID0gcHJvZHVjdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXJlZ3VsYXItcHJpY2UnKTtcbiAgICAgIGNvbnN0IGNvbXBhcmVQcmljZSA9IHByb2R1Y3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1jb21wYXJlLXByaWNlJyk7XG4gICAgICBjb25zdCBpZFNlbGVjdG9yID0gcHJvZHVjdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWlkLXNlbGVjdG9yJyk7XG5cbiAgICAgIGZ1bmN0aW9uIGdldFZhcmlhbnRJZChzZWxlY3RlZE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHJvZHVjdFZhcmlhbnRzID0gd2luZG93LnByb2R1Y3RWYXJpYW50c1twcm9kdWN0SWRdO1xuICAgICAgICBjb25zdCB2YXJpYW50ID0gcHJvZHVjdFZhcmlhbnRzLmZpbmQodmFyaWFudCA9PlxuICAgICAgICAgIHZhcmlhbnQub3B0aW9ucy5ldmVyeSgob3B0aW9uLCBpbmRleCkgPT4gb3B0aW9uID09PSBzZWxlY3RlZE9wdGlvbnNbaW5kZXhdKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdmFyaWFudCA/IHZhcmlhbnQuaWQgOiAnJztcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGdldFZhcmlhbnRQcmljZShzZWxlY3RlZE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHJvZHVjdFZhcmlhbnRzID0gd2luZG93LnByb2R1Y3RWYXJpYW50c1twcm9kdWN0SWRdO1xuICAgICAgICBjb25zdCB2YXJpYW50ID0gcHJvZHVjdFZhcmlhbnRzLmZpbmQodmFyaWFudCA9PlxuICAgICAgICAgIHZhcmlhbnQub3B0aW9ucy5ldmVyeSgob3B0aW9uLCBpbmRleCkgPT4gb3B0aW9uID09PSBzZWxlY3RlZE9wdGlvbnNbaW5kZXhdKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdmFyaWFudCA/IHZhcmlhbnQucHJpY2VNb25leSA6ICcnO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZ2V0VmFyaWFudFByaWNlUmF3KHNlbGVjdGVkT3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcm9kdWN0VmFyaWFudHMgPSB3aW5kb3cucHJvZHVjdFZhcmlhbnRzW3Byb2R1Y3RJZF07XG4gICAgICAgIGNvbnN0IHZhcmlhbnQgPSBwcm9kdWN0VmFyaWFudHMuZmluZCh2YXJpYW50ID0+XG4gICAgICAgICAgdmFyaWFudC5vcHRpb25zLmV2ZXJ5KChvcHRpb24sIGluZGV4KSA9PiBvcHRpb24gPT09IHNlbGVjdGVkT3B0aW9uc1tpbmRleF0pXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB2YXJpYW50ID8gdmFyaWFudC5wcmljZVJhdyA6ICcnO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZ2V0VmFyaWFudENvbXBhcmVQcmljZShzZWxlY3RlZE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHJvZHVjdFZhcmlhbnRzID0gd2luZG93LnByb2R1Y3RWYXJpYW50c1twcm9kdWN0SWRdO1xuICAgICAgICBjb25zdCB2YXJpYW50ID0gcHJvZHVjdFZhcmlhbnRzLmZpbmQodmFyaWFudCA9PlxuICAgICAgICAgIHZhcmlhbnQub3B0aW9ucy5ldmVyeSgob3B0aW9uLCBpbmRleCkgPT4gb3B0aW9uID09PSBzZWxlY3RlZE9wdGlvbnNbaW5kZXhdKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdmFyaWFudCA/IHZhcmlhbnQuY29tcGFyZXByaWNlTW9uZXkgOiAnJztcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGdldFZhcmlhbnRDb21wYXJlUHJpY2VSYXcoc2VsZWN0ZWRPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHByb2R1Y3RWYXJpYW50cyA9IHdpbmRvdy5wcm9kdWN0VmFyaWFudHNbcHJvZHVjdElkXTtcbiAgICAgICAgY29uc3QgdmFyaWFudCA9IHByb2R1Y3RWYXJpYW50cy5maW5kKHZhcmlhbnQgPT5cbiAgICAgICAgICB2YXJpYW50Lm9wdGlvbnMuZXZlcnkoKG9wdGlvbiwgaW5kZXgpID0+IG9wdGlvbiA9PT0gc2VsZWN0ZWRPcHRpb25zW2luZGV4XSlcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHZhcmlhbnQgPyB2YXJpYW50LmNvbXBhcmVwcmljZVJhdyA6ICcnO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVBZGRUb0NhcnRCdXR0b24oKSB7XG4gICAgICAgIGxldCBzZWxlY3RlZE9wdGlvbnMgPSBbXTtcbiAgICAgICAgc2VsZWN0b3JzLmZvckVhY2goc2VsZWN0b3IgPT4ge1xuICAgICAgICAgIHNlbGVjdGVkT3B0aW9ucy5wdXNoKHNlbGVjdG9yLnZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdmFyaWFudElkID0gZ2V0VmFyaWFudElkKHNlbGVjdGVkT3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHZhcmlhbnRQcmljZSA9IGdldFZhcmlhbnRQcmljZShzZWxlY3RlZE9wdGlvbnMpO1xuICAgICAgICBjb25zdCB2YXJpYW50Q29tcGFyZVByaWNlID0gZ2V0VmFyaWFudENvbXBhcmVQcmljZShzZWxlY3RlZE9wdGlvbnMpO1xuICAgICAgICBjb25zdCB2YXJpYW50UHJpY2VSYXcgPSBnZXRWYXJpYW50UHJpY2VSYXcoc2VsZWN0ZWRPcHRpb25zKTtcbiAgICAgICAgY29uc3QgdmFyaWFudENvbXBhcmVQcmljZVJhdyA9IGdldFZhcmlhbnRDb21wYXJlUHJpY2VSYXcoc2VsZWN0ZWRPcHRpb25zKTtcblxuICAgICAgICBpZih2YXJpYW50UHJpY2UpIHtcbiAgICAgICAgICAgIHByaWNlLnRleHRDb250ZW50ID0gdmFyaWFudFByaWNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodmFyaWFudENvbXBhcmVQcmljZSkge1xuICAgICAgICAgICAgY29tcGFyZVByaWNlLnRleHRDb250ZW50ID0gdmFyaWFudENvbXBhcmVQcmljZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHZhcmlhbnRJZCkge1xuICAgICAgICAgICAgYWRkVG9DYXJ0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS1pdGVtLWlkJywgdmFyaWFudElkKTtcbiAgICAgICAgfVxuICAgICAgICBpZih2YXJpYW50UHJpY2VSYXcpIHtcbiAgICAgICAgICAgIGlkU2VsZWN0b3Iuc2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0tcHJpY2UnLCB2YXJpYW50UHJpY2VSYXcpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHZhcmlhbnRDb21wYXJlUHJpY2VSYXcpIHtcbiAgICAgICAgICAgIGlkU2VsZWN0b3Iuc2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0tY29tcGFyZS1wcmljZScsIHZhcmlhbnRDb21wYXJlUHJpY2VSYXcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNlbGVjdG9ycy5mb3JFYWNoKHNlbGVjdG9yID0+IHtcbiAgICAgICAgc2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdXBkYXRlQWRkVG9DYXJ0QnV0dG9uKTtcbiAgICAgIH0pO1xuXG4gICAgICB1cGRhdGVBZGRUb0NhcnRCdXR0b24oKTtcbiAgICB9KTtcbiAgfSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/modules/bundle/bundle-atc.js\n");

/***/ }),

/***/ "./src/scripts/entries/section/bundle-atc.js":
/*!***************************************************!*\
  !*** ./src/scripts/entries/section/bundle-atc.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lib_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lib/components */ \"./src/scripts/lib/components.js\");\n/* harmony import */ var modules_bundle_bundle_atc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! modules/bundle/bundle-atc.js */ \"./src/modules/bundle/bundle-atc.js\");\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  (0,lib_components__WEBPACK_IMPORTED_MODULE_0__.initComponent)(modules_bundle_bundle_atc_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"], 'BundleAtc');\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9lbnRyaWVzL3NlY3Rpb24vYnVuZGxlLWF0Yy5qcyIsIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2hvcGlmeS1iYXNlLTIuMC8uL3NyYy9zY3JpcHRzL2VudHJpZXMvc2VjdGlvbi9idW5kbGUtYXRjLmpzP2FmZTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdENvbXBvbmVudCB9IGZyb20gJ2xpYi9jb21wb25lbnRzJ1xuaW1wb3J0IEJ1bmRsZUF0YyBmcm9tICdtb2R1bGVzL2J1bmRsZS9idW5kbGUtYXRjLmpzJ1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBpbml0Q29tcG9uZW50KEJ1bmRsZUF0YywgJ0J1bmRsZUF0YycpXG59KVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/entries/section/bundle-atc.js\n");

/***/ }),

/***/ "./src/modules/bundle/bundle.css":
/*!***************************************!*\
  !*** ./src/modules/bundle/bundle.css ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kdWxlcy9idW5kbGUvYnVuZGxlLmNzcyIsIm1hcHBpbmdzIjoiO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaG9waWZ5LWJhc2UtMi4wLy4vc3JjL21vZHVsZXMvYnVuZGxlL2J1bmRsZS5jc3M/MGM0YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/modules/bundle/bundle.css\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["commons"], function() { return __webpack_exec__("./src/scripts/entries/section/bundle-atc.js"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);