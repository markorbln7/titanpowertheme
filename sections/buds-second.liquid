{% schema %}
{
  "name": "Feature Centered Image",
  "tag": "section",
  "class": "custom-feature-image",
  "settings": [
    {
      "type": "text",
      "id": "feature_number",
      "label": "Feature Number",
      "default": "2"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Smart Built in Touch Screen"
    },
    {
      "type": "image_picker",
      "id": "center_image",
      "label": "Center Image"
    }
  ],
  "blocks": [
    {
      "type": "left_block",
      "name": "Left Block",
      "settings": [
        {
          "type": "text",
          "id": "block_number",
          "label": "Block Number"
        },
        {
          "type": "text",
          "id": "block_title",
          "label": "Block Title"
        },
        {
          "type": "text",
          "id": "block_subtitle",
          "label": "Block Subtitle"
        },
        {
          "type": "image_picker",
          "id": "block_image",
          "label": "Block Image"
        }
      ]
    },
    {
      "type": "right_block",
      "name": "Right Block",
      "settings": [
        {
          "type": "text",
          "id": "block_number",
          "label": "Block Number"
        },
        {
          "type": "text",
          "id": "block_title",
          "label": "Block Title"
        },
        {
          "type": "text",
          "id": "block_subtitle",
          "label": "Block Subtitle"
        },
        {
          "type": "image_picker",
          "id": "block_image",
          "label": "Block Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Buds Feature Centered Image"
    }
  ]
}
{% endschema %}
<div class="bg-[linear-gradient(to_bottom,_rgb(255,255,255),_#014115)] bg-[length:100%_300%] bg-[position:0_-100%] py-[30px] px-[10px]">


  <section class="max-w-[1090px] mx-auto rounded-[24px] bg-white p-[20px] text-center shadow-[0_0_10px_#b5b5b5]">
    <div class="flex items-center justify-center mb-[20px] flex-col md:flex-row gap-[10px] md:gap-[0px]">
      <span class="bg-[#2f4534] text-white md:text-[50px] text-[32px] font-bold px-[12px] py-[4px] rounded-full w-[60px] h-[60px] flex items-center justify-center">{{ section.settings.feature_number }}</span>
      <h2 class="text-[#2f4534] md:text-[50px] text-[32px] font-bold ml-[10px] text-center">{{ section.settings.title }}</h2>
    </div>
    <div class="flex flex-col md:flex-row items-stretch justify-between gap-[20px]">
      <div class="hidden flex-col justify-between w-full md:w-[25%] md:items-baseline items-baseline md:flex">
        {% for block in section.blocks %}
          {% if block.type == 'left_block' %}
            <div data-text="{{ block.settings.block_number }}" class="text-left flex-1 flex flex-col justify-center text-block {% if forloop.index == 1 %}active{% endif %}">
              <p class="font-bold text-[#2f4534]">{{ block.settings.block_title }}</p>
              <p class="text-[#2f4534]">{{ block.settings.block_subtitle }}</p>
            </div>
          {% endif %}
        {% endfor %}
        {% for block in section.blocks %}
          {% if block.type == 'right_block' and forloop.index == 6  %}
            <div data-text="{{ block.settings.block_number  }}" class="text-left flex-1 flex flex-col justify-center text-block">
              <p class="font-bold text-[#2f4534]">{{ block.settings.block_title }}</p>
              <p class="text-[#2f4534]">{{ block.settings.block_subtitle }}</p>
            </div>
          {% endif %}
        {% endfor %}
      </div>
      <div class="w-full md:w-[50%] flex items-center">
        <div
          class="grid grid-cols-4 grid-rows-4 md:gap-[30px] gap-[20px] relative"
        >
          {% for block in section.blocks %}
            {% if block.type == 'left_block' and forloop.index < 6 %}
                <div data-image="image-{{ forloop.index }}" class="col-span-1 row-span-1 left-block {% if forloop.index == 2 %}active-image{% endif %}">
                  <img width="100%" height="auto" src="{{block.settings.block_image | img_url:'master' }}" alt="Placeholder" class="w-full h-full object-contain rounded-lg" />
                </div>
            {% endif %}
          {% endfor %}

          <div
            class="col-span-2 row-span-2 flex items-center justify-center"
          >
            <img width="100%" height="auto" src="{{ section.settings.center_image | img_url:'master' }}" alt="Main Placeholder" class="w-full h-full object-cover rounded-lg" />
          </div>


          {% for block in section.blocks %}
            {% if block.type == 'left_block' %}
              {% if forloop.index == 6 %}
                <div data-image="image-{{ forloop.index }}" class="col-span-1 row-span-1 left-block">
                  <img width="100%" height="auto" src="{{block.settings.block_image | img_url:'master' }}" alt="Placeholder" class="w-full h-full object-contain rounded-lg" />
                </div>
              {% endif %}
            {% endif %}
          {% endfor %}

          {% for block in section.blocks %}
            {% if block.type == 'right_block' %}
                <div data-image="image-{{ forloop.index }}" class="col-span-1 row-span-1 right-block">
                  <img width="100%" height="auto" src="{{block.settings.block_image | img_url:'master' }}" alt="Placeholder" class="w-full h-full object-contain rounded-lg" />
                </div>
            {% endif %}
          {% endfor %}

        </div>
      </div>
      <div class="md:flex flex-col justify-between w-full md:w-[25%] md:items-baseline items-baseline hidden">
        {% for block in section.blocks %}
          {% if block.type == 'right_block' and forloop.index != 6 %}
            <div data-text="{{ block.settings.block_number }}" class="text-left flex-1 flex flex-col justify-center text-block">
              <p class="font-bold text-[#2f4534]">{{ block.settings.block_title }}</p>
              <p class="text-[#2f4534]">{{ block.settings.block_subtitle }}</p>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <div id="display-div" class="mt-[20px] p-[10px] rounded-lg text-center block md:hidden">
      <p class="font-bold text-[#2f453]">Camera Control</p>
      <p class="text-[#2f453]">Hands-free photo capture</p>
    </div>
  </section>
</div>

<script>
  document.querySelectorAll('div[data-image]').forEach(img => {
    console.log(img, 'img');
    img.addEventListener('mouseover', function() {
      document.querySelectorAll('div[data-image]').forEach(imgfull => {
        imgfull.classList.remove('active-image');
      });
      img.classList.add('active-image');
      const value = this.getAttribute('data-image');
      document.querySelectorAll('div[data-text]').forEach(textfull => {
        textfull.classList.remove('active');
      });
      const targetDiv = document.querySelector(`div[data-text="${value}"]`);

      if (targetDiv) {
        targetDiv.classList.add('active');
      }
    });

    img.addEventListener('mouseout', function() {
      img.classList.remove('active-image');
      const value = this.getAttribute('data-image');
      const targetDiv = document.querySelector(`div[data-text="${value}"]`);
      if (targetDiv) {
        targetDiv.classList.remove('active');
      }
    });
    img.addEventListener('click', function() {
      const value = this.getAttribute('data-image');
      const targetDiv = document.querySelector(`div[data-text="${value}"]`);
      const displayDiv = document.getElementById('display-div');

      if (targetDiv) {
        displayDiv.innerHTML = targetDiv.innerHTML;
        displayDiv.classList.remove('hidden');
      }
    });
  });
</script>
<style>
  .text-block.active {
    cursor: pointer;
    transform: scale(1.1);
    transition: transform 0.3s;
  }
  .active-image {
    cursor: pointer;
    transform: scale(1.1);
    transition: transform 0.3s;
  }
  @media (max-width: 768px) {
    .active-image {
      cursor: pointer;
      transform: scale(1.3);
      transition: transform 0.3s;
    }
  }
</style>